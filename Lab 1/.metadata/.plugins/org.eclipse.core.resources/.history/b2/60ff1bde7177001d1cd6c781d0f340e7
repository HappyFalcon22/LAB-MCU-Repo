/*
 * buzzer.c
 *
 *  Created on: Dec 9, 2022
 *      Author: Admin
 */
#include "buzzer.h"
#include "main.h"

#define	START	100
#define	OFF		0
#define STEP_UNIT	10

int value = OFF;
int step = 0;
int delay = 500; // Initial delay

void buzzerRun()
{
	if (buzzer_flag == 1)
	{
		setBuzzer(delay);
		if (value == OFF)
		{
			value = START + step;
			step += STEP_UNIT;
			__HAL_TIM_SetCompare(&htim3, TIM_CHANNEL_3, value);
		}
		else
		{
			value = OFF;
			__HAL_TIM_SetCompare(&htim3, TIM_CHANNEL_3, value);
		}
		delay -= STEP_UNIT;
	}
}

